[platformio]
default_envs = esp32c3dev  # Using ESP32-C3

[env:esp32c3dev]
board = esp32-c3-devkitm-1
platform = ${esp32c3.platform}
platform_packages = ${esp32c3.platform_packages}
build_flags = ${common.build_flags} ${esp32c3.build_flags}
  -D USERMOD_AUDIOREACTIVE
  -D AUDIOPIN=-1
  -D DMTYPE=1     # I2S generic microphone
  -D I2S_SDPIN=0  # Data/SD pin - adjusted for ESP32-C3
  -D I2S_WSPIN=3  # Word Select/WS pin - adjusted for ESP32-C3
  -D I2S_CKPIN=1  # Clock/SCK pin - adjusted for ESP32-C3
  -D BTNPIN=9     # First button
  -D BTN2PIN=6    # Second button
  -D WLED_MAX_BUTTONS=2  # Enable support for 2 buttons
  -DARDUINO_USB_CDC_ON_BOOT=0   # for serial-to-USB chip
build_unflags = ${common.build_unflags}
lib_deps = ${esp32c3.lib_deps}
board_build.flash_mode = dio
monitor_filters = esp32_exception_decoder
